"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9560],{9560:(x,m,n)=>{n.r(m),n.d(m,{RegistroPageModule:()=>y});var p=n(6895),u=n(433),s=n(5035),g=n(1407),h=n(655);class v{constructor(){this.username="",this.email="",this.role=[],this.password=""}}var e=n(8256),d=n(2340),f=n(529);let U=(()=>{class o{constructor(t,r){this.router=t,this.http=r}listUser(){let t="Bearer "+localStorage.getItem("token")||0;return this.http.get(d.N.API_URL+"/api/registro",{headers:{Authorization:t}})}addUser(t){let r="Bearer "+localStorage.getItem("token")||0;return this.http.post(d.N.API_URL+"/api/registro",t,{headers:{Authorization:r}})}deleteUser(t){let r=d.N.API_URL+"/api/registro/"+t,i="Bearer "+localStorage.getItem("token")||0;return this.http.delete(r,{headers:{Authorization:i}})}changeUser(t){let r="Bearer "+localStorage.getItem("token")||0;return this.http.put(d.N.API_URL+"/api/registro",t,{headers:{Authorization:r}})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(g.F0),e.LFG(f.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=n(7749);function _(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-row")(2,"ion-col")(3,"ion-item")(4,"ion-label",3),e._uU(5,"Email"),e.qZA(),e.TgZ(6,"ion-input",4),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.KtG(a.email=i)}),e.qZA()()(),e.TgZ(7,"ion-col")(8,"ion-item")(9,"ion-label",3),e._uU(10,"Usuario"),e.qZA(),e.TgZ(11,"ion-input",5),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.KtG(a.username=i)}),e.qZA()()(),e.TgZ(12,"ion-col")(13,"ion-item")(14,"ion-label",3),e._uU(15,"Contrase\xf1a"),e.qZA(),e.TgZ(16,"ion-input",6),e.NdJ("ngModelChange",function(i){const a=e.CHM(t).$implicit;return e.KtG(a.password=i)}),e.qZA()()(),e.TgZ(17,"ion-col")(18,"ion-item")(19,"ion-button",7),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addUser(c))}),e._UZ(20,"ion-icon",8),e._uU(21," Guardar "),e.qZA(),e.TgZ(22,"ion-button",7),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.deleteUser(c.username))}),e._UZ(23,"ion-icon",9),e._uU(24," Eliminar "),e.qZA(),e.TgZ(25,"ion-button",7),e.NdJ("click",function(){const c=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.editUser(c))}),e._UZ(26,"ion-icon",10),e._uU(27," Editar "),e.qZA()()()()()}if(2&o){const t=l.$implicit,r=e.oxw();e.xp6(6),e.Q6J("name","user.email")("ngModel",t.email)("readonly",r.read),e.xp6(5),e.Q6J("name","user.username")("ngModel",t.username)("readonly",r.read),e.xp6(5),e.Q6J("name","user.password")("ngModel",t.password)("readonly",r.read)}}const R=[{path:"",component:(()=>{class o{constructor(t,r,i){this.userService=t,this.alertcontroller=r,this.roleService=i,this.read=!0,this.users=[]}ngOnInit(){this.roleService.isRoleAdmin(),this.read=!1,this.listUser()}listUser(){this.userService.listUser().subscribe(t=>{this.users=t,this.users.push(new v)},t=>{this.alertError(t)})}deleteUser(t){this.userService.deleteUser(t).subscribe(r=>{r.message.search("Error")?this.alertError(r):this.alertCorrect(r),this.read=!0,window.location.reload()},r=>{406==r.status?this.alertError406(r):this.alertError(r)})}addUser(t){this.userService.addUser(t).subscribe(r=>{r.message.search("Error")?this.alertError(r):this.alertCorrect(r),this.read=!0,window.location.reload()},r=>{406==r.status?this.alertError406(r):this.alertError(r)})}editUser(t){this.userService.changeUser(t).subscribe(r=>{r.message.search("Error")?this.alertError(r):this.alertCorrect(r),this.read=!0,window.location.reload()},r=>{406==r.status?this.alertError406(r):this.alertError(r)})}alertError(t){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertcontroller.create({header:t.error.message,subHeader:t.error.message,message:t.error.message,buttons:["Acepto"]})).present()})}alertCorrect(t){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertcontroller.create({header:t.message,subHeader:t.message,message:t.message,buttons:["Acepto"]})).present()})}alertError406(t){return(0,h.mG)(this,void 0,void 0,function*(){yield(yield this.alertcontroller.create({header:"Errores en campos",subHeader:"Revise los siguientes campos",message:t.error[1],buttons:["Acepto"]})).present()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(U),e.Y36(s.Br),e.Y36(C.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-registro"]],decls:6,vars:2,consts:[[1,"ion-padding",3,"fullscreen"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["position","stacked"],["type","email","placeholder","Email","helperText","Enter a valid email","errorText","Invalid email","labelPlacement","floating","email","",3,"name","ngModel","readonly","ngModelChange"],["type","username","placeholder","Usuario",3,"name","ngModel","readonly","ngModelChange"],["type","password","placeholder","Contrase\xf1a",3,"name","ngModel","readonly","ngModelChange"],[3,"click"],["slot","icon-only","name","save-outline"],["slot","icon-only","name","trash-outline"],["slot","icon-only","name","construct-outline"]],template:function(t,r){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-grid",1)(2,"ion-title")(3,"h1"),e._uU(4," Registro de Usuarios"),e.qZA()(),e.YNc(5,_,28,9,"div",2),e.qZA()()),2&t&&(e.Q6J("fullscreen",!1),e.xp6(5),e.Q6J("ngForOf",r.users))},dependencies:[p.sg,u.JJ,u.on,u.On,s.YG,s.wI,s.W2,s.jY,s.gu,s.pK,s.Ie,s.Q$,s.Nd,s.wd,s.j9]}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(R),g.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,u.u5,s.Pc,M]}),o})()}}]);