"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5549],{5549:(z,P,s)=>{s.r(P),s.d(P,{HomeModule:()=>G});var l=s(5035),g=s(6895),u=s(433),e=s(8256);let x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,u.u5,l.Pc]}),o})();var m=s(8771),h=s(1407),C=s(655);class v{constructor(){this.titulo="",this.imagen="",this.titulo2="",this.contenido="",this.numeroPagina=0}}var M=s(7579),T=s(6063);class Z extends M.x{constructor(r=1/0,t=1/0,n=T.l){super(),this._bufferSize=r,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,t)}next(r){const{isStopped:t,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:c}=this;t||(n.push(r),!i&&n.push(a.now()+c)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(r),{_infiniteTimeWindow:n,_buffer:i}=this,a=i.slice();for(let c=0;c<a.length&&!r.closed;c+=n?1:2)r.next(a[c]);return this._checkFinalizedStatuses(r),t}_trimBuffer(){const{_bufferSize:r,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:i}=this,a=(i?1:2)*r;if(r<1/0&&a<n.length&&n.splice(0,n.length-a),!i){const c=t.now();let f=0;for(let d=1;d<n.length&&n[d]<=c;d+=2)f=d;f&&n.splice(0,f+1)}}}var H=s(7942),b=s(7749),_=s(2340),y=s(529);let A=(()=>{class o{constructor(t,n){this.router=t,this.http=n}listPaginas(){return this.http.get(_.N.API_URL+"/api/home/paginas")}crearPaginas(t){let n="Bearer "+localStorage.getItem("token")||0;return this.http.post(_.N.API_URL+"/api/home",t,{headers:{Authorization:n}})}eliminarPagina(t){let n="Bearer "+localStorage.getItem("token")||0;return this.http.delete(_.N.API_URL+"/api/home/"+t,{headers:{Authorization:n}})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.F0),e.LFG(y.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=s(8567);function O(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"ion-grid")(1,"ion-row")(2,"ion-col")(3,"ion-item",4)(4,"ion-button",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.guardarPagina(i.home))}),e._UZ(5,"ion-icon",11),e._uU(6," Guardar "),e.qZA(),e.TgZ(7,"ion-button",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.eliminarPagina(i.home.numeroPagina))}),e._UZ(8,"ion-icon",12),e._uU(9," Eliminar "),e.qZA(),e.TgZ(10,"ion-button",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editarPagina(i.home))}),e._UZ(11,"ion-icon",13),e._uU(12," Editar "),e.qZA(),e.TgZ(13,"ion-button",1),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.crearPagina())}),e._UZ(14,"ion-icon",14),e._uU(15," Crear "),e.qZA()()()()()}}function S(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item",15)(2,"ion-label",16),e._uU(3,"Titulo 1"),e.qZA(),e.TgZ(4,"ion-input",17),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.home.titulo=i)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("clearInput",!0)("ngModel",t.home.titulo)}}function F(o,r){if(1&o){const t=e.EpF();e._uU(0," Sube tu fichero o imagen en este apartado "),e.TgZ(1,"button",24),e.NdJ("click",function(){const a=e.CHM(t).openFileSelector;return e.KtG(a())}),e._uU(2,"Buscar ficheros"),e.qZA()}}function I(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"strong"),e._uU(3),e.qZA()()()),2&o){const t=r.$implicit;e.xp6(3),e.Oqu(t.relativePath)}}function w(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",18)(1,"ngx-file-drop",19),e.NdJ("onFileDrop",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.dropped(i))})("onFileOver",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.fileOver(i))})("onFileLeave",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.fileLeave(i))}),e.YNc(2,F,3,0,"ng-template",20),e.qZA(),e.TgZ(3,"div",21)(4,"table",22)(5,"thead")(6,"tr")(7,"th"),e._uU(8,"Name"),e.qZA()()(),e.TgZ(9,"tbody",23),e.YNc(10,I,4,1,"tr",9),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(10),e.Q6J("ngForOf",t.files)}}function J(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item",15)(2,"ion-label",16),e._uU(3,"Titulo 2"),e.qZA(),e.TgZ(4,"ion-input",25),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.home.titulo2=i)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("clearInput",!0)("ngModel",t.home.titulo2)}}function N(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"ion-item",15)(2,"ion-label",16),e._uU(3,"Contenido"),e.qZA(),e.TgZ(4,"ion-textarea",26),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.home.contenido=i)}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("clearOnEdit",!0)("ngModel",t.home.contenido)}}function E(o,r){1&o&&e._UZ(0,"div")}const L=[{path:"",component:(()=>{class o{constructor(t,n,i,a){this.tab=t,this.role=n,this.homeService=i,this.alertcontroller=a,this.files=[],this.homeList=[],this.home=new v,this.isAdmin=!1,this.readonly=!0,this.count=this.homeList.length,this.currentPage=1,this.itemsPerPage=1,this.totalItems=2,this.pagingConfig={}}ngOnInit(){this.listPaginas(),this.isAdmin=this.role.isRoleAdmin(),this.pagingConfig={itemsPerPage:this.itemsPerPage,currentPage:this.currentPage,totalItems:this.totalItems}}onChange(t){console.dir(t),console.dir(this.totalItems),console.dir(this.itemsPerPage),this.currentPage=t,this.seleccionarPagina(this.currentPage)}listPaginas(){this.homeService.listPaginas().subscribe(t=>{this.homeList=t,this.home=this.homeList[0],this.currentPage=1,this.totalItems=this.homeList.length,this.itemsPerPage=this.currentPage},t=>{this.alertError(t)})}handleScrollStart(){this.tab.scroll=!0,this.tab.tabs=!0}handleScrollEnd(){this.tab.scroll=!1,this.tab.tabs=!1}seleccionarPagina(t){this.home=this.homeList[t-1],this.pagingConfig={itemsPerPage:this.itemsPerPage,currentPage:this.currentPage,totalItems:this.totalItems}}eliminarPagina(t){this.homeService.eliminarPagina(t).subscribe(n=>{window.location.reload()},n=>{this.alertError(n)})}editarPagina(t){this.readonly=!1,this.homeService.crearPaginas(t).subscribe(n=>{window.location.reload()},n=>{this.alertError(n)})}crearPagina(){this.readonly=!1,this.home=new v}guardarPagina(t){this.readonly=!0,t.numeroPagina=this.homeList.length+1,this.homeService.crearPaginas(t).subscribe(n=>{window.location.reload()},n=>{this.alertError(n)})}dropped(t){this.files=t;for(const n of t)n.fileEntry.isFile?n.fileEntry.file(a=>{this.convertFile(a)}):console.log(n.relativePath,n.fileEntry)}convertFile(t){new Z(1);const i=new FileReader;i.readAsDataURL(t),i.onload=()=>{this.home.imagen=i.result}}fileOver(t){console.log(t)}fileLeave(t){console.log(t)}alertError(t){return(0,C.mG)(this,void 0,void 0,function*(){yield(yield this.alertcontroller.create({header:t.error.message,subHeader:t.error.message,message:t.error.message,buttons:["Acepto"]})).present()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(H.D),e.Y36(b.N),e.Y36(A),e.Y36(l.Br))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:27,vars:15,consts:[[3,"fullscreen","scrollEvents","ionScrollStart"],[3,"click"],["collapse","condense"],["size","large"],["color","secondary"],[4,"ngIf"],["class","center",4,"ngIf"],["alt","beca juanma",3,"src"],[1,"contenido"],[4,"ngFor","ngForOf"],["previousLabel","Prev","nextLabel","Next",1,"paginator",3,"pageChange"],["slot","icon-only","name","save-outline"],["slot","icon-only","name","trash-outline"],["slot","icon-only","name","construct-outline"],["slot","icon-only","name","create-outline"],["fill","outline"],["position","floating"],["placeholder","Introduce el titulo Principal",3,"clearInput","ngModel","ngModelChange"],[1,"center"],["dropZoneLabel","Drop files here",3,"onFileDrop","onFileOver","onFileLeave"],["ngx-file-drop-content-tmp",""],[1,"upload-table"],[1,"table"],[1,"upload-name-style"],["type","button",3,"click"],["placeholder","Introduce el titulo 2",3,"clearInput","ngModel","ngModelChange"],["placeholder","Introduce el titulo Contenido",3,"clearOnEdit","ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0),e.NdJ("ionScrollStart",function(){return n.handleScrollStart()}),e.TgZ(1,"ion-button",1),e.NdJ("click",function(){return n.handleScrollEnd()}),e._uU(2,"Menu"),e.qZA(),e.TgZ(3,"ion-header",2)(4,"ion-toolbar")(5,"ion-title",3),e._uU(6,"Beca Juanma"),e.qZA()()(),e.TgZ(7,"ion-card",4),e.YNc(8,O,16,0,"ion-grid",5),e.TgZ(9,"ion-card-header")(10,"ion-card-title")(11,"h1"),e._uU(12),e.qZA(),e.YNc(13,S,5,2,"div",5),e.qZA(),e.YNc(14,w,11,1,"div",6),e._UZ(15,"img",7),e.TgZ(16,"ion-card-subtitle")(17,"h2"),e._uU(18),e.qZA()(),e.YNc(19,J,5,2,"div",5),e.qZA(),e.TgZ(20,"ion-card-content")(21,"span",8),e._uU(22),e.qZA(),e.YNc(23,N,5,2,"div",5),e.qZA(),e.YNc(24,E,1,0,"div",9),e.ALo(25,"paginate"),e.TgZ(26,"pagination-controls",10),e.NdJ("pageChange",function(a){return n.onChange(a)}),e.qZA()()()),2&t&&(e.Q6J("fullscreen",!1)("scrollEvents",!0),e.xp6(8),e.Q6J("ngIf",1==n.isAdmin),e.xp6(4),e.hij(" ",n.home.titulo," "),e.xp6(1),e.Q6J("ngIf",1==n.isAdmin),e.xp6(1),e.Q6J("ngIf",1==n.isAdmin),e.xp6(1),e.s9C("src",n.home.imagen,e.LSH),e.xp6(3),e.Oqu(n.home.titulo2),e.xp6(1),e.Q6J("ngIf",1==n.isAdmin),e.xp6(3),e.hij(" ",n.home.contenido,""),e.xp6(1),e.Q6J("ngIf",1==n.isAdmin),e.xp6(1),e.Q6J("ngForOf",e.xi3(25,12,n.homeList,n.pagingConfig)))},dependencies:[l.YG,l.PM,l.FN,l.Zi,l.tO,l.Dq,l.wI,l.W2,l.jY,l.Gu,l.gu,l.pK,l.Ie,l.Q$,l.Nd,l.g2,l.wd,l.sr,l.j9,g.sg,g.O5,u.JJ,u.On,m.CB,m.L9,p.LS,p._s],styles:["ion-card-header.ios[_ngcontent-%COMP%]{display:flex;flex-flow:column-reverse}h1[_ngcontent-%COMP%]{font-family:Mariposa;font-size:100px}h2[_ngcontent-%COMP%]{font-family:Mariposa;font-size:60px}pagination-controls[_ngcontent-%COMP%]{font-size:40px}img[_ngcontent-%COMP%]{width:50%;height:50%;border-radius:5%;box-shadow:0 10px 10px rgba(245,244,244,.15)}.contenido[_ngcontent-%COMP%]{font-size:25px;font-family:Courier New,Courier,monospace}.paginas[_ngcontent-%COMP%]{display:inline-block}.ion-color-secondary[_ngcontent-%COMP%]{--ion-color-base:#2d608f !important}ion-card[_ngcontent-%COMP%]{text-align:center}ion-card-title[_ngcontent-%COMP%]{text-align:center}.paginator[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]{padding:0}.paginator[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(.current, .pagination-next[_ngcontent-%COMP%], .pagination-previous)[_ngcontent-%COMP%]{background:rgb(235,235,235)}.paginator[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .paginator[_ngcontent-%COMP%]   .ngx-pagination[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{font-family:Mariposa;padding:1rem 1.5rem}"]}),o})()}];let U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.Bz.forChild(L),h.Bz]}),o})(),G=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.Pc,g.ez,u.u5,x,U,m.Yi,p.JX]}),o})()}}]);